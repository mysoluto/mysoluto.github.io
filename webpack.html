<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack | soluto</title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/assets/style.c78bc0a3.css">
    <link rel="modulepreload" href="/assets/app.adfffae8.js">
    <link rel="modulepreload" href="/assets/webpack.md.5299a562.lean.js">
    
    <meta name="twitter:title" content="webpack | soluto">
  <meta property="og:title" content="webpack | soluto">
  </head>
  <body>
    <div id="app"><div class="page"><header class="page-header"><h1>M.X</h1></header><main class="page-main"><div style="position:relative;"><div><h1 id="webpack-学习" tabindex="-1">webpack 学习 <a class="header-anchor" href="#webpack-学习" aria-hidden="true">#</a></h1><h2 id="dependency-解析" tabindex="-1">dependency 解析 <a class="header-anchor" href="#dependency-解析" aria-hidden="true">#</a></h2><p>webpack最新的5.x版本中，dependency解析依赖两个核心类完成：NormalModuleFactory 和 JavascriptParser</p><p>基本思想是，入口上下文信息会被一个实例表示，根据这个实例的构造函数找到对应的 module factory，对于js来说，基本都是NormalModuleFactory</p><div class="language-js"><pre><code><span class="token keyword">const</span> factory <span class="token operator">=</span> compiliation<span class="token punctuation">.</span>dependencyFactories<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>EntryDependency<span class="token punctuation">)</span>
</code></pre></div><p>从factory中构造Module实例，比如NormalModule, 传入实例中的一个比较重要的属性是parser, 它用于解析js文件，从中找出可能的依赖，进行循环处理 parser提供了比较多的hook用于处理 ast解析环节的狗子</p><h3 id="webpack-4-x-版本" tabindex="-1">webpack 4.x 版本 <a class="header-anchor" href="#webpack-4-x-版本" aria-hidden="true">#</a></h3><p>从Compilation实例的addEntry方法开始 寻找依赖，生成module实例，存放在Compilation实例中的modules，逻辑流程图如下</p><p><img src="/assets/webpack-addEntry.b5c71d98.png" alt=""></p><ol><li>factory.create方法中，执行resolve解析步骤，并生成module实例，大部分是NomralModule实例</li><li>调用module实例的build方法</li><li>在module build执行过程中，运行loaders，返回 source 文本，接着生成ast文件</li><li>解析ast文件后，module的dependencies包含很多dependency实例</li><li>遍历moduel.dependencies, 找到对应的factory, 然后执行上述步骤1，循环</li></ol><p>如下是在一个项目中断点打出的factory 和dependency类型的映射</p><div class="language-js"><pre><code><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">&quot;CssDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;CssModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;ConstDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NullFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;WebAssemblyImportDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;WebAssemblyExportImportedDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;MultiEntryDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;MultiModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;SingleEntryDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;HarmonyCompatibilityDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NullFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;HarmonyInitDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NullFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;HarmonyImportSideEffectDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;HarmonyImportSpecifierDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;HarmonyExportHeaderDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NullFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;HarmonyExportExpressionDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NullFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;HarmonyExportSpecifierDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NullFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;HarmonyExportImportedSpecifierDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;HarmonyAcceptDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NullFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;HarmonyAcceptImportDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;AMDRequireDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NullFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;AMDRequireItemDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;AMDRequireArrayDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NullFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;AMDRequireContextDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ContextModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;AMDDefineDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NullFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;UnsupportedDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NullFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;LocalModuleDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NullFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;CommonJsRequireDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;CommonJsRequireContextDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ContextModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;RequireResolveDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;RequireResolveContextDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ContextModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;RequireResolveHeaderDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NullFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;RequireHeaderDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NullFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;LoaderDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;RequireIncludeDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;RequireEnsureItemDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;RequireEnsureDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NullFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;RequireContextDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ContextModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;ContextElementDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;ImportDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;ImportEagerDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;ImportWeakDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NormalModuleFactory&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;ImportContextDependency&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ContextModuleFactory&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>

</code></pre></div><p>NullFactory的create方法是一个空的函数</p><p>对于vue文件，使用vue-loader去解析vue文件，解析vue文件的过程中，vue文件第一步 被 vue-loader加载成如下格式</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> render<span class="token punctuation">,</span> staticRenderFns <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./error.vue?vue&amp;type=template&amp;id=a85b39f0&amp;&quot;</span>
<span class="token keyword">import</span> script <span class="token keyword">from</span> <span class="token string">&quot;./error.vue?vue&amp;type=script&amp;lang=js&amp;&quot;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&quot;./error.vue?vue&amp;type=script&amp;lang=js&amp;&quot;</span>
<span class="token keyword">import</span> style0 <span class="token keyword">from</span> <span class="token string">&quot;./error.vue?vue&amp;type=style&amp;index=0&amp;lang=scss&amp;&quot;</span>


<span class="token comment">/* normalize component */</span>
<span class="token keyword">import</span> normalizer <span class="token keyword">from</span> <span class="token string">&quot;!../node_modules/vue-loader/lib/runtime/componentNormalizer.js&quot;</span>
<span class="token keyword">var</span> component <span class="token operator">=</span> <span class="token function">normalizer</span><span class="token punctuation">(</span>
  script<span class="token punctuation">,</span>
  render<span class="token punctuation">,</span>
  staticRenderFns<span class="token punctuation">,</span>
  <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token keyword">null</span>
  
<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> component<span class="token punctuation">.</span>exports
</code></pre></div><p>然后解析依赖，重复上面的步骤，对于不同的依赖类型，loader的数量有差异，其中extract-css-chunk-webpack-plugin 插件的loader, 会调用 Compilation实例的createChildCompiler方法，然后添加新的entry, 比如</p><p>loader中有一个pitch方法，它的流程参考https://webpack.js.org/api/loaders/， pitch方法先执行，后面再执行loader的默认方法</p><div class="language-json"><pre><code><span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/Users/klook/Documents/work/temp/klook-web-hotel/node_modules/html-webpack-plugin/lib/loader.js!/Users/klook/Documents/work/temp/klook-web-hotel/app.html&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/Users/klook/Documents/work/temp/klook-web-hotel/node_modules/html-webpack-plugin/lib/loader.js!/Users/klook/Documents/work/temp/klook-web-hotel/app.html&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;extract-css-chunks-webpack-plugin&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token string">&quot;!!/Users/klook/Documents/work/temp/klook-web-hotel/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!/Users/klook/Documents/work/temp/klook-web-hotel/node_modules/vue-loader/lib/loaders/stylePostLoader.js!/Users/klook/Documents/work/temp/klook-web-hotel/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!/Users/klook/Documents/work/temp/klook-web-hotel/node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!/Users/klook/Documents/work/temp/klook-web-hotel/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/klook/Documents/work/temp/klook-web-hotel/components/common/svg-icon.vue?vue&amp;type=style&amp;index=0&amp;lang=scss&amp;&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p>在实际项目中断点打的addEntry数量有208个，基本都是extract-css-chunks-webpack-plugin产生的</p><h2 id="webpack-bootstrap-源码" tabindex="-1">webpack bootstrap 源码 <a class="header-anchor" href="#webpack-bootstrap-源码" aria-hidden="true">#</a></h2><p>webpack bootstrap是 webpack打包之后的启动代码，以下部分是基于webpack 4.x的源码逻辑，在webpack 5.x中，MainTemplate文件被废弃掉了</p><p>在MainTemplate.js里面定义了 renderBootstrap方法，返回bootstrap的代码 大致如下</p><p>在window下面挂载了一个变量 <code>webpackJsonp</code>, 这个变量名可以在 output options里面可以更改，webpackJsonp是一个普通的数据，其push方法被绑定成webpackJsonpCallback</p><p>然后对chunk代码的加载，其模式是</p><div class="language-js"><pre><code><span class="token punctuation">(</span>window<span class="token punctuation">[</span><span class="token string">&#39;webpackJsonp&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> window<span class="token punctuation">[</span><span class="token string">&#39;webpackJsonp&#39;</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">188</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>moreModules<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>exectedModules<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>因此从webpackJsonp中可以看出加载了多少个chunk, 以及所有的module模块；在实际加载chunk的时候，执行的是webpackJsonpCallback方法，参数如上，是一个多维数组</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">webpackJsonpCallback</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> chunkIds <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> moreModules <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> exectedModules <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>

  <span class="token keyword">const</span> resolves <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  chunkIds<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">chunkId</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>installedChunks<span class="token punctuation">,</span> chunkId<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> installedChunks<span class="token punctuation">[</span>chunkId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      resolves<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>installedChunks<span class="token punctuation">[</span>chunkId<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    installedChunks<span class="token punctuation">[</span>chunkId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 0 标记chunk loaded</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span>m <span class="token keyword">in</span> moreModules<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>moreModules<span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 缓存模块</span>
      modules<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">=</span> moreModules<span class="token punctuation">[</span>m<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span><span class="token punctuation">(</span>parentJsonpFunction<span class="token punctuation">)</span> <span class="token function">parentJsonpFunction</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span>resolves<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    reosolves<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  deferedModuels<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>deferedModules<span class="token punctuation">,</span> execedModules<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token function">checkDeferredModules</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>下载chunk js文件，然后执行上面的webpackJsonpCallback函数，缓存chunk里面包含的module，后面代码执行的时候，实际通过<code>__webpack_require__(moduleId)</code> 加载模块，类似于源码里面的 <code>const vue = require(&#39;vue&#39;)</code></p><p>在__webpack_require__，执行具体的模块加载逻辑，该function下面也挂载了一些扩展extension方法，比如（<strong>webpack_require</strong>.s, <strong>webpack_require</strong>.c等），其中比较重要的是 <code>__webpack_require__.e</code>, 增加script标签来加载chunk js文件，chunk js的路径通过jsonpScriptSrc方法获取</p><div class="language-js"><pre><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">modules</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">webpackJsonpCallback</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">checkDeferredModules</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token keyword">var</span> installedModules <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">var</span> installedChunks <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token keyword">var</span> installedCssChunks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">function</span> <span class="token function">jsonpScriptSrc</span><span class="token punctuation">(</span><span class="token parameter">chunkId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token parameter">moduleId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token comment">// require function shortcuts:</span>
  <span class="token comment">// __webpack_require__.s = the module id of the entry point</span>
  <span class="token comment">// __webpack_require__.c = the module cache</span>
  <span class="token comment">// __webpack_require__.m = the module functions</span>
  <span class="token comment">// __webpack_require__.p = the bundle public path</span>
  <span class="token comment">// __webpack_require__.i = the identity function used for harmony imports</span>
  <span class="token comment">// __webpack_require__.e = the chunk ensure function</span>
  <span class="token comment">// __webpack_require__.d = the exported property define getter function</span>
  <span class="token comment">// __webpack_require__.o = Object.prototype.hasOwnProperty.call</span>
  <span class="token comment">// __webpack_require__.r = define compatibility on export</span>
  <span class="token comment">// __webpack_require__.t = create a fake namespace object</span>
  <span class="token comment">// __webpack_require__.n = compatibility get default export</span>
  <span class="token comment">// __webpack_require__.h = the webpack hash</span>
  <span class="token comment">// __webpack_require__.w = an object containing all installed WebAssembly.Instance export objects keyed by module id</span>
  <span class="token comment">// __webpack_require__.oe = the uncaught error handler for the webpack runtime</span>
  <span class="token comment">// __webpack_require__.nc = the script nonce</span>

  <span class="token keyword">var</span> jsonpArray <span class="token operator">=</span> window<span class="token punctuation">[</span><span class="token string">&#39;webpackJsonp&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> window<span class="token punctuation">[</span><span class="token string">&#39;webpackJsonp&#39;</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">var</span> jsonpOldFunction <span class="token operator">=</span> jsonpArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>jsonpArray<span class="token punctuation">)</span>
  jsonpArray<span class="token punctuation">.</span>push <span class="token operator">=</span> webpackJsonpCallback
  jsonpArray <span class="token operator">=</span> jsonpArray<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> <span class="token keyword">var</span> i <span class="token operator">&lt;</span> jsonpArray<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">webpackJsonpCallback</span><span class="token punctuation">(</span>jsonpArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> parentJsonpFunction <span class="token operator">=</span> jsonpOldFunction

  <span class="token function">checkDeferredModules</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div></div></div></main></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"8b967e31\",\"nodejs_memory.md\":\"2e550f1a\",\"problem.md\":\"53c89487\",\"vite.md\":\"a0f05bd4\",\"vue_reactive_index.md\":\"de39c8fc\",\"webpack.md\":\"5299a562\"}")</script>
    <script type="module" async src="/assets/app.adfffae8.js"></script>
    
  </body>
</html>